# 关闭重启与恢复

## 影响参数

### innodb_fast_shutdown

该参数可取值`0`、`1`、`2`，默认为1

> `0`表示数据库关闭时，InnoDB要完成所有的`full purge`和`merge insert buffer`，并将所有的脏页刷回磁盘。这需要一些时间，有时甚至需要几个小时来完成。如果在进行InnoDB升级时，必须将这个参数调为0，然后在关闭数据库。
> `1`表示不需要完成上述的`full purge`和`merge insert buffer`操作，但是缓冲池中的一些数据脏页还是会刷新回磁盘。
> `2`表示以上都不完成，而是将日志都写入日志文件，这样就不会有任何事物的丢失，但是下次数据库启动时，会进行恢复操作。

### innodb_force_recovery

> `0`代表当发生需要恢复时，进行所有的恢复操作，当不能进行有效恢复时，如数据页发生了corruption，数据库可能发生宕机，并把错误写入错误日志中。
> `1`
